<div class="admin-user-container">
  <div class="path">
    <i class="fa-solid fa-house"></i>
    <span class="slash">/</span>
    <p>Usuários</p>
  </div>

  <div class="toolbar">
    <div class="action-btns">
      <button class="add-btn" (click)="toggleModal()">
        <i class="fa-solid fa-plus"></i>Adicionar
      </button>
      <app-admin-modal
        *ngIf="showModal"
        (userAdded)="onUserAdded()"
        (close)="toggleModal()"
      ></app-admin-modal>
      <button class="export-btn" (click)="exportForExcel()">
        <i class="fa-solid fa-cloud-arrow-down"></i>Exportar
      </button>
    </div>

    <form class="search-box" [formGroup]="searchForm" (ngSubmit)="searchForUsers()">
      <input type="text" placeholder="Procure por Usuários..." formControlName="searchValue" />
      <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
    </form>

    <div class="pagination-option">
      <p>Resultados:</p>
      <select [(ngModel)]="pageSize" (change)="currentPage = 1">
        <option [value]="5">5</option>
        <option [value]="10">10</option>
        <option [value]="15">15</option>
        <option [value]="30">30</option>
      </select>
    </div>
  </div>

  <table class="crud-table">
    <thead>
      <tr>
        <th>Id</th>
        <th>Imagem</th>
        <th>Nome</th>
        <th>Email</th>
        <th>Senha</th>
        <th>Phone</th>

        <th class="options-th">Opções</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="
          let user of users
            | paginate : { itemsPerPage: pageSize, currentPage: currentPage }
        "
      >
        <td>{{ user.id }}</td>
        <td class="td-center">
          <img
            [src]="user.imageUrl"
            alt=""
            *ngIf="user.imageUrl; else blankUserImage"
          />
          <ng-template #blankUserImage>
            <div class="blank-user-wrapper">
              <i class="fa-solid fa-user"></i>
            </div>
          </ng-template>
        </td>
        <td>{{ user.firstName + " " + user.lastName }}</td>
        <td>{{ user.email }}</td>
        <td>•••••••••••</td>
        <td>{{ user.phone }}</td>
        <td>
          <div class="options-area">
            <i class="fa-solid fa-pen-to-square"></i>
            <i class="fa-solid fa-delete-left"></i>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="table-footer">
    <!-- <div class="page-switcher-wrapper">
            <p>Página</p>
            <div class="page-switcher">
                <button>1</button>
                <button>2</button>
                <button>3</button>
                <button>4</button>
                <button>5</button>
                <button>></button>
                <button>>></button>
            </div>
        </div> -->
    <pagination-controls
      (pageChange)="currentPage = $event"
      [maxSize]="5"
      [directionLinks]="true"
      previousLabel="<"
      nextLabel=">"
      [autoHide]="false">
    </pagination-controls>

    <div>
      <p>Mostrando os Resultados {{startIndex}}-{{endIndex}} de {{users.length}}</p>
    </div>
  </div>
</div>
